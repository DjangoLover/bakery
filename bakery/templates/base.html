<!DOCTYPE html>
{% load i18n %}
{% load static from staticfiles %}
<html>
  <head>
    <meta charset="utf-8">
    <title>Bakery &ndash; Cookiecutter Index</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {# TODO: only in debug build #}
    <link rel="stylesheet/less" type="text/css" href="{% static 'less/bakery.less' %}" />
  </head>
  <body>
    <div id="wrap">
      <div class="container">
        <div class="page-header">
            <div id="navbar">
                <div class="container">
                    <div class="row">
                        <div class="col-md-8">
                            <div class="row">
                                <a class="col-md-2" id="logo" href="/">
                                    <img src="{% static 'img/logo.svg' %}" height="40" class="img">
                                </a>

                                <nav class="col-md-6" role="navigation">
                                    <ul class="nav nav-pills">
                                        <li><a href="#">About</a></li>
                                        <li><a href="#">Documentation</a></li>
                                        {% block header_nav %}{% endblock header_nav %}
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="controls">
            <a class="btn btn-primary" id="github-login" href="#"
               title="Sign in with Github">
                Github
            </a>

            <a class="btn btn-primary persona-button orange" id="persona-login"
               href="javascript:persona_login()"
               title="Sign in with Persona">
                <span>Persona</span>
            </a>

            <!-- Define a form to send the POST data -->
            <form method="post" action="/complete/persona/" id="persona-login-form">
                {% csrf_token %}
                <input type="hidden" name="assertion" id="persona-assertion" value="">
            </form>
        </div>
        {% block content %}{% endblock content %}
     </div>
    </div>


    <div id="footer">
      <div class="container">
        <nav class="col-md-12" role="navigation">
            <a class="logo col-md-1" href="/">
                <img src="{% static 'img/logo.svg' %}" height="45" class="img" />
            </a>

            <ul class="nav nav-pills">
                <li><a href="#">About</a></li>
                <li><a href="#">Documentation</a></li>
                {% block footer_nav %}{% endblock footer_nav %}
            </ul>
        </nav>
    </div>
    </div>


    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="{% static 'js/vendor/jquery.min.js' %}" type="application/javascript"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="{% static 'js/vendor/bootstrap.min.js' %}" type="application/javascript"></script>

    <script src="{% static 'js/vendor/less.min.js' %}"></script>

    <!-- Include BrowserID JavaScript -->
    <script src="https://login.persona.org/include.js" type="text/javascript"></script>

    <!-- Setup click handler that retieves Persona assertion code and sends POST data -->
    <!-- TODO: this does not belong here! -->
    <script type="text/javascript">
      function persona_login() {
          navigator.id.get(function(assertion) {
              if (assertion) {
                  var assertion_field = document.getElementById("persona-assertion");
                  assertion_field.value = assertion;
                  var login_form = document.getElementById("persona-login-form");
                  login_form.submit();
              }
          });
      }
    </script>

  </body>
</html>
